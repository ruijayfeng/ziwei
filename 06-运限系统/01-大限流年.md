# 大限流年详解

## 概述

紫微斗数将人生运势分为多个层级，从宏观到微观：

| 层级 | 周期 | 主管内容 | 影响权重 |
|------|------|---------|---------|
| 原命局 | 一生 | 先天格局、基本命运 | 50% |
| 大限 | 10年 | 十年运势走向 | 25% |
| 小限 | 1年 | 本年个人运势 | 15% |
| 流年 | 1年 | 本年外在环境 | 10% |
| 流月 | 1月 | 月度运势 | - |
| 流日 | 1日 | 每日运势 | - |
| 流时 | 2小时 | 时辰运势 | - |

---

## 一、大限（十年运）

### 基本概念

> **大限是紫微斗数最重要的运限，每十年一个周期**

大限将人生分为十二个阶段，每段十年，总计一百二十年。这与天干每隔十年重复一次的规律相呼应。

### 起运年龄

大限起始年龄由**五行局**决定：

| 五行局 | 起运年龄 | 第一大限 | 第二大限 |
|--------|---------|---------|---------|
| 水二局 | 虚2岁 | 2-11岁 | 12-21岁 |
| 木三局 | 虚3岁 | 3-12岁 | 13-22岁 |
| 金四局 | 虚4岁 | 4-13岁 | 14-23岁 |
| 土五局 | 虚5岁 | 5-14岁 | 15-24岁 |
| 火六局 | 虚6岁 | 6-15岁 | 16-25岁 |

### 大限行运方向

大限行运方向由**阴阳**和**性别**共同决定：

#### 阴阳判定

| 天干 | 阴阳 |
|------|------|
| 甲、丙、戊、庚、壬 | 阳干 |
| 乙、丁、己、辛、癸 | 阴干 |

#### 行运规则

| 类型 | 判定条件 | 行运方向 |
|------|---------|---------|
| 阳男 | 阳年出生的男性 | **顺行**（顺时针） |
| 阴女 | 阴年出生的女性 | **顺行**（顺时针） |
| 阴男 | 阴年出生的男性 | **逆行**（逆时针） |
| 阳女 | 阳年出生的女性 | **逆行**（逆时针） |

> **口诀：阳男阴女顺行，阴男阳女逆行**

### 大限宫位顺序

#### 顺行（阳男阴女）

```
第1限：命宫 → 第2限：父母宫 → 第3限：福德宫 →
第4限：田宅宫 → 第5限：官禄宫 → 第6限：交友宫 →
第7限：迁移宫 → 第8限：疾厄宫 → 第9限：财帛宫 →
第10限：子女宫 → 第11限：夫妻宫 → 第12限：兄弟宫
```

#### 逆行（阴男阳女）

```
第1限：命宫 → 第2限：兄弟宫 → 第3限：夫妻宫 →
第4限：子女宫 → 第5限：财帛宫 → 第6限：疾厄宫 →
第7限：迁移宫 → 第8限：交友宫 → 第9限：官禄宫 →
第10限：田宅宫 → 第11限：福德宫 → 第12限：父母宫
```

### 大限天干排法

大限天干从命宫天干开始，按天干固有顺序排布：

- **阳男阴女**：顺布十二宫
- **阴男阳女**：逆布十二宫

**示例**：命宫天干为甲

| 顺行 | 逆行 |
|------|------|
| 甲乙丙丁戊己庚辛壬癸甲乙 | 甲癸壬辛庚己戊丁丙乙甲癸 |

### 换限时间

两种主流说法：

1. **虚岁大年初一子时**
2. **虚岁阴历生日时辰之后**（较准确，推荐使用）

---

## 二、小限（个人年运）

### 基本概念

> **小限主一年之荣枯休咎，代表个人运势**

小限与流年的区别：
- **小限**：属于自己的情况，个人内在运势
- **流年**：属于大家的，外在环境对自己的影响

### 小限起点

小限起点由**出生年支**决定（不分阴阳）：

| 出生年支 | 起始宫位 |
|---------|---------|
| 寅、午、戌 | **辰宫**起1岁 |
| 申、子、辰 | **戌宫**起1岁 |
| 亥、卯、未 | **丑宫**起1岁 |
| 巳、酉、丑 | **未宫**起1岁 |

### 小限行运方向

> **小限不分阴阳，一律男命顺行、女命逆行**

| 性别 | 行运方向 |
|------|---------|
| 男命 | 顺行（顺时针） |
| 女命 | 逆行（逆时针） |

### 小限计算公式

```
当前小限宫位 = 起始宫位 + (当前虚岁 - 1) × 方向
```

**方向**：顺行 +1，逆行 -1（超过12宫则循环）

---

## 三、流年（太岁年运）

### 基本概念

> **流年又称太岁，代表外在环境对命主的影响**

流年以当年地支所在宫位为流年命宫。

### 流年命宫定位

直接以当年地支所在宫位为流年命宫：

| 流年地支 | 流年命宫 |
|---------|---------|
| 子年 | 子宫 |
| 丑年 | 丑宫 |
| 寅年 | 寅宫 |
| ... | ... |
| 亥年 | 亥宫 |

### 流年四化

流年四化由当年天干决定，参照十干四化表。

**2025年（乙巳年）四化**：
- 化禄：天机
- 化权：天梁
- 化科：紫微
- 化忌：太阴

**2026年（丙午年）四化**：
- 化禄：天同
- 化权：天机
- 化科：文昌
- 化忌：廉贞

---

## 四、流月

### 斗君定位

流月需先定**斗君**位置。斗君是流月正月的起点。

#### 斗君定位步骤

1. 找到**流年地支**所在宫位
2. 从该宫位起**正月**，**逆数**至本人**生月**止
3. 从所止宫位起**子时**，**顺数**至本人**生时**止
4. 最后所停宫位即为当年**斗君**

**示例**：某人生于农历三月卯时，2025年（巳年）

```
步骤1：找到巳宫
步骤2：巳宫起正月 → 辰宫二月 → 卯宫三月（止）
步骤3：卯宫起子时 → 辰宫丑时 → 巳宫寅时 → 午宫卯时（止）
结论：2025年斗君在午宫
```

### 流月宫位

斗君确定后，以斗君为正月，顺数各月：

| 月份 | 宫位计算 |
|------|---------|
| 正月 | 斗君所在宫 |
| 二月 | 斗君 + 1宫（顺行） |
| 三月 | 斗君 + 2宫（顺行） |
| ... | ... |

### 流月天干

流月天干用**五虎遁**求得，以流年天干起正月。

---

## 五、流日与流时

### 流日

以流月所落宫位起**初一**，**顺行**推算：

```
如流月在午宫：
初一 = 午宫
初二 = 未宫
初三 = 申宫
......
```

### 流时

以流日宫位起**子时**，**顺行**推算：

```
如流日在午宫：
子时 = 午宫
丑时 = 未宫
寅时 = 申宫
......
```

---

## 六、运限断法要点

### 层级关系

```
原命局 → 大限 → 小限/流年 → 流月 → 流日 → 流时
```

上层对下层起**定性**作用，下层对上层起**定时**作用。

### 论断原则

1. **先看原局**：确定先天格局高低
2. **再看大限**：十年运势基调
3. **再看流年小限**：应验时机
4. **追踪化忌**：化忌是灾厄的引爆点

### 吉凶判断

| 组合 | 论断 |
|------|------|
| 原局吉 + 大限吉 + 流年吉 | 大吉大利 |
| 原局吉 + 大限凶 + 流年吉 | 凶中有救 |
| 原局凶 + 大限吉 + 流年吉 | 暂时得意 |
| 原局凶 + 大限凶 + 流年凶 | 大凶之象 |

### 化忌追踪法

> **大限的焦点问题，着重跟踪化忌星**

1. 以原局焦点宫为**体**
2. 看大限化忌是否**重叠**或**冲**原局焦点宫
3. 若是，则凶灾已基本定型
4. 再看流年化忌**应验时间**

---

## 七、编程实现要点

### 大限计算伪代码

```python
def calculate_daxian(birth_year_gan, gender, wuxing_ju, age):
    """
    计算大限宫位

    参数:
        birth_year_gan: 出生年天干
        gender: 性别 ('male' 或 'female')
        wuxing_ju: 五行局数 (2/3/4/5/6)
        age: 当前虚岁

    返回:
        大限宫位索引 (0-11)
    """
    # 判断阴阳
    yang_gan = ['甲', '丙', '戊', '庚', '壬']
    is_yang = birth_year_gan in yang_gan

    # 判断行运方向
    # 阳男阴女顺行，阴男阳女逆行
    if (is_yang and gender == 'male') or (not is_yang and gender == 'female'):
        direction = 1  # 顺行
    else:
        direction = -1  # 逆行

    # 计算大限序号（从0开始）
    start_age = wuxing_ju
    daxian_index = (age - start_age) // 10

    # 命宫索引（假设为0）
    ming_gong = 0

    # 计算大限宫位
    daxian_gong = (ming_gong + daxian_index * direction) % 12

    return daxian_gong
```

### 小限计算伪代码

```python
def calculate_xiaoxian(birth_year_zhi, gender, age):
    """
    计算小限宫位

    参数:
        birth_year_zhi: 出生年地支
        gender: 性别
        age: 当前虚岁

    返回:
        小限宫位索引 (0-11)
    """
    # 小限起点对照表
    XIAOXIAN_START = {
        '寅': 4, '午': 4, '戌': 4,  # 辰宫(4)
        '申': 10, '子': 10, '辰': 10,  # 戌宫(10)
        '亥': 1, '卯': 1, '未': 1,  # 丑宫(1)
        '巳': 7, '酉': 7, '丑': 7   # 未宫(7)
    }

    start_gong = XIAOXIAN_START[birth_year_zhi]

    # 男顺女逆
    direction = 1 if gender == 'male' else -1

    # 计算小限宫位
    xiaoxian_gong = (start_gong + (age - 1) * direction) % 12

    return xiaoxian_gong
```

### 斗君计算伪代码

```python
def calculate_doujun(year_zhi, birth_month, birth_hour):
    """
    计算斗君位置

    参数:
        year_zhi: 流年地支
        birth_month: 出生农历月份 (1-12)
        birth_hour: 出生时辰索引 (0-11, 子时为0)

    返回:
        斗君宫位索引 (0-11)
    """
    ZHI_INDEX = {
        '子': 0, '丑': 1, '寅': 2, '卯': 3,
        '辰': 4, '巳': 5, '午': 6, '未': 7,
        '申': 8, '酉': 9, '戌': 10, '亥': 11
    }

    # 步骤1：找到流年地支所在宫位
    start = ZHI_INDEX[year_zhi]

    # 步骤2：从该宫位起正月，逆数至生月
    step2 = (start - (birth_month - 1)) % 12

    # 步骤3：从所止宫位起子时，顺数至生时
    doujun = (step2 + birth_hour) % 12

    return doujun
```

---

## 参考资源

- [紫微斗数行限详解 - 360doc](http://www.360doc.com/content/25/0825/19/55280825_1160042061.shtml)
- [紫微斗数的命局、大限、小限、流年讲解 - 知乎](https://zhuanlan.zhihu.com/p/718987833)
- [紫微斗数大限、流年、流月、流日的断法 - 令东来官网](https://www.xuanmen.com.cn/archives/398.html)
- [紫微斗数行限详解 - 易师汇](https://ly.yishihui.net/bz/3774.htm)
- [紫微斗数手工排盘：安大限与小限 - 星林学苑](https://www.108s.tw/article/info/96)
- [紫微斗数小限解析 - 豆瓣](https://www.douban.com/group/topic/138611651/)
- [紫微斗数在线排盘工具](http://iziwei.com.cn/)
